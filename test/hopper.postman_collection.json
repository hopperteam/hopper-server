{
	"info": {
		"_postman_id": "3cefe2c6-39b0-43dd-a2d3-d60d2dcec813",
		"name": "hopper-test",
		"description": "This is the API documentation for the hopper project.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "/",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "64ae1213-d153-4cb5-9bd7-795bcb69178f",
						"exec": [
							"pm.collectionVariables.unset(\"subscriptionId\");",
							"pm.collectionVariables.unset(\"notificationId\");",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "947c6c92-64a6-4e97-94f2-47bd01ce0559",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{api-url}}/",
					"host": [
						"{{api-url}}"
					],
					"path": [
						""
					]
				},
				"description": "- ping the hopper backend"
			},
			"response": [
				{
					"name": "/ v1",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base-url}}/api/v1/",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"api",
								"v1",
								""
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": null,
					"cookie": [],
					"body": "{\n    \"version\": \"1.0\",\n    \"type\": \"mock\"\n}"
				}
			]
		},
		{
			"name": "/user",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "47daa950-bd70-491e-b813-0240fc374dfe",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{api-url}}/user",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"user"
					]
				},
				"description": "- get the current user based on the current session"
			},
			"response": [
				{
					"name": "/user v1",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base-url}}/api/v1/user",
							"host": [
								"{{base-url}}"
							],
							"path": [
								"api",
								"v1",
								"user"
							]
						}
					},
					"_postman_previewlanguage": "json",
					"header": null,
					"cookie": [],
					"body": "{\n\t\"email\": \"test@email.com\",\n\t\"firstName\": \"first\",\n\t\"lastName\": \"last\"\n}"
				}
			]
		},
		{
			"name": "/app",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "dae91d41-e6b6-46bc-8c86-7ef8d6ad0937",
						"exec": [
							"pm.test(\"Has correct Id\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.id).to.eql(pm.collectionVariables.get(\"appId\"));",
							"    pm.collectionVariables.set(\"appId\", jsonData.id);",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"_id\": \"5eb6cafd4e05a32868462625\",\n\t\"name\": \"TestApp\",\n\t\"baseUrl\": \"https://www.baseurl.com\",\n\t\"imageUrl\": \"https://www.baseurl.com/path/to/image.png\",\n\t\"contactEmail\": \"support@TestApp.com\",\n\t\"cert\": \"LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQklUQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FRNEFNSUlCQ1FLQ0FRQjBkSlVGcEVMemptNDVyQVRKVmgzanBDVVFCRkIwN1k2Z09FOXN3YzJYSTF4ejMySFFKUVdNQzV4aVRZQlV4VjM2bEkxNUJGSlIwck9nTUpCeVZxUVNqdUhjT0pYT0hpT0tmSi9CcEJjMVJEUXMxdVBWU3MzSTVPL1plelo3bWExcllMaTh1Vko2bllWZ09zbFZpV3ErME1yWHJwRmZVaGI3TXQzdGhGcHF3djU4WDgxTC9SVk5kVEpyeU1XdldPSHJlUFBGMmVNMitHeGJwZy9VODArUTJIcVhzZlQwYnh5S0taa291dndSSzRqQ2pzWVhzMURrMGVyMWI1dkdrTnA5T09hTlRDQThtM1lPcmZOMVo2TzBZRXFLTUFBYTdnVzVheDdxbCtXZ0NlcENJdTl1R2pQZDE4clNuYVkreVFkRHIwRWlta3RyNjdnWlAwM1BJZE5QQWdNQkFBRT0KLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0t\"\n}"
				},
				"url": {
					"raw": "{{api-url}}/app",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"app"
					]
				},
				"description": "- register new service provider to hopper"
			},
			"response": []
		},
		{
			"name": "/app",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "7bdc1eef-ee93-4fdf-8dfc-d7705abb7bdd",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"id\": \"{{appId}}\",\n\t\"content\": \"eyJ2ZXJpZnkiOiJBemtiMWF0NFdBc2VVeXNxeGNQTytRcFQrVjhqQk1HazVyUHo0S3BOTThKM09ZZ2o0ajY5cFJnN0VDVytxZHB6WXVIdXJrdXpkaStCMWRsUG5zaVFxTGxVa0c3NE9XZE0zYXA1TnArMVlvcWV0NTRUdVpPVkMzZ1dXWHRUdGVpeFZpK1l4MlQ2dTVCaXBSN1lsSVlaNjZaaEE3R2F1bVBRVi9GdHg0ZjRpSnZOdjhWd1ZFY0ZUeWkrbStPMFcxOUdMS0llV0NEY0JrQlFNbHZrdWVVanpKd3ExRGVxUDE3azFsVEZ0L2ZQanBNT3NjY1Fqd1RCWEtqTG5JU3pwS2tTUlZOZkJKdG96cGY0Uks2bGV5M2FUK1hyUEVwcitPS1Q5c2RHS2tDK1JvWkk1WkJoanNsbzJxWUdVTWRNWmgrLy92L3UrNWlVdzBSQkI4SmRmVGlFamc9PSIsImRhdGEiOnsibWFuYWdlVXJsIjoiaHR0cHM6Ly90ZXN0QXBwLmNvbS9tYW5hZ2UifX0=\"\n}"
				},
				"url": {
					"raw": "{{api-url}}/app",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"app"
					]
				},
				"description": "- update details of a service provider"
			},
			"response": []
		},
		{
			"name": "/subscribeRequest",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "8ab1c3b9-85d6-43a4-b35e-ec935ca3ec1f",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{api-url}}/subscribeRequest?id={{appId}}&content=eyJ2ZXJpZnkiOiJQaEwrS1BvUDhSYjA5VEVQMUZMRENhT3NFU2dpYW5KZVM1amZQNjJ2YklDbmlIcFVuUnkvZ0NDQXFqc1BvSzRvVEFIWEhVVU5oTVBRSmFQYkthMmw0YURoeTVzTXpkWEdiVitNbER4YXE0d3BpSkZCY25YSVNkcEFEaHBJcVFKY0VMeHp3YTdOcnRJdjdDOWxpSzBFMkx2Y0tVcHZJSVdYWEphMG5XcmVMRTlUMGgxZjhOZ0pkVHZTWlVPb2dHamxlTlF0QU9WRFdkS1NLRHFlK3F0YlU1dnVobkkyR1g2djlOOHBnM1lwM0hJUEltazdjYzNkVk94YXJaenlkZjJKTlJNTkRVYm5XMTJHeWczWnBJYWlhZCtRNzZZZk0rS0c0TXIzRFBneGo1VjZmZTN3NHZKdWlrZVQ3ZWZvL3lnd0lQTVgzV0x0MVBrZjM4d2c3MmU3WFE9PSIsImRhdGEiOnsiaWQiOiI1ZWI2Y2FmZDRlMDVhMzI4Njg0NjI2MjUiLCJjYWxsYmFjayI6Imh0dHBzOi8vdGVzdEFwcC5jb20vY2FsbGJhY2siLCJhY2NvdW50TmFtZSI6IlRlc3RVc2VyIiwicmVxdWVzdGVkSW5mb3MiOlsibmFtZSIsImFkZHJlc3MiXX19",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"subscribeRequest"
					],
					"query": [
						{
							"key": "id",
							"value": "{{appId}}"
						},
						{
							"key": "content",
							"value": "eyJ2ZXJpZnkiOiJQaEwrS1BvUDhSYjA5VEVQMUZMRENhT3NFU2dpYW5KZVM1amZQNjJ2YklDbmlIcFVuUnkvZ0NDQXFqc1BvSzRvVEFIWEhVVU5oTVBRSmFQYkthMmw0YURoeTVzTXpkWEdiVitNbER4YXE0d3BpSkZCY25YSVNkcEFEaHBJcVFKY0VMeHp3YTdOcnRJdjdDOWxpSzBFMkx2Y0tVcHZJSVdYWEphMG5XcmVMRTlUMGgxZjhOZ0pkVHZTWlVPb2dHamxlTlF0QU9WRFdkS1NLRHFlK3F0YlU1dnVobkkyR1g2djlOOHBnM1lwM0hJUEltazdjYzNkVk94YXJaenlkZjJKTlJNTkRVYm5XMTJHeWczWnBJYWlhZCtRNzZZZk0rS0c0TXIzRFBneGo1VjZmZTN3NHZKdWlrZVQ3ZWZvL3lnd0lQTVgzV0x0MVBrZjM4d2c3MmU3WFE9PSIsImRhdGEiOnsiaWQiOiI1ZWI2Y2FmZDRlMDVhMzI4Njg0NjI2MjUiLCJjYWxsYmFjayI6Imh0dHBzOi8vdGVzdEFwcC5jb20vY2FsbGJhY2siLCJhY2NvdW50TmFtZSI6IlRlc3RVc2VyIiwicmVxdWVzdGVkSW5mb3MiOlsibmFtZSIsImFkZHJlc3MiXX19"
						}
					]
				},
				"description": "- decrypt data of subscribe request based on id of service provider"
			},
			"response": []
		},
		{
			"name": "/subscribeRequest",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "ab802836-f16e-488f-90dd-6e9592012924",
						"exec": [
							"pm.test(\"Body has subscriptionId\", function () {",
							"    pm.response.to.have.jsonBody(\"subscriptionId\");",
							"})",
							"pm.collectionVariables.set(\"subscriptionId\", pm.response.json().subscriptionId);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"id\": \"{{appId}}\",\n\t\"content\": \"eyJ2ZXJpZnkiOiJQaEwrS1BvUDhSYjA5VEVQMUZMRENhT3NFU2dpYW5KZVM1amZQNjJ2YklDbmlIcFVuUnkvZ0NDQXFqc1BvSzRvVEFIWEhVVU5oTVBRSmFQYkthMmw0YURoeTVzTXpkWEdiVitNbER4YXE0d3BpSkZCY25YSVNkcEFEaHBJcVFKY0VMeHp3YTdOcnRJdjdDOWxpSzBFMkx2Y0tVcHZJSVdYWEphMG5XcmVMRTlUMGgxZjhOZ0pkVHZTWlVPb2dHamxlTlF0QU9WRFdkS1NLRHFlK3F0YlU1dnVobkkyR1g2djlOOHBnM1lwM0hJUEltazdjYzNkVk94YXJaenlkZjJKTlJNTkRVYm5XMTJHeWczWnBJYWlhZCtRNzZZZk0rS0c0TXIzRFBneGo1VjZmZTN3NHZKdWlrZVQ3ZWZvL3lnd0lQTVgzV0x0MVBrZjM4d2c3MmU3WFE9PSIsImRhdGEiOnsiaWQiOiI1ZWI2Y2FmZDRlMDVhMzI4Njg0NjI2MjUiLCJjYWxsYmFjayI6Imh0dHBzOi8vdGVzdEFwcC5jb20vY2FsbGJhY2siLCJhY2NvdW50TmFtZSI6IlRlc3RVc2VyIiwicmVxdWVzdGVkSW5mb3MiOlsibmFtZSIsImFkZHJlc3MiXX19\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{api-url}}/subscribeRequest",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"subscribeRequest"
					]
				},
				"description": "- decrypt data of subscribe request based on id of service provider"
			},
			"response": []
		},
		{
			"name": "/notification (Create)",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "745a2ae9-7d0d-4b10-81a4-13eaa7ea8ffe",
						"exec": [
							"pm.test(\"Body has id\", function () {",
							"    pm.response.to.have.jsonBody(\"id\");",
							"});",
							"pm.collectionVariables.set(\"notificationId\", pm.response.json().id);",
							"if (pm.collectionVariables.get(\"deleteInstantly\") === true) {",
							"    postman.setNextRequest(\"/notification (App)\");",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"subscriptionId\": \"{{subscriptionId}}\",\n\t\"notification\": {\n\t\t\"heading\": \"Whatsapp message\",\n\t\t\"timestamp\": 1573066333249,\n\t\t\"type\": \"default\",\n\t\t\"content\": \"Das geht ja wirklich. Unglaublich\",\n\t\t\"actions\": [\n\t\t\t{\n\t\t\t\t\"type\": \"submit\",\n\t\t\t\t\"url\": \"tbd\",\n\t\t\t\t\"markAsDone\": false,\n\t\t\t\t\"text\": \"submit nothing\"\n\t\t\t}\t\n\t\t]\n\t}\n}"
				},
				"url": {
					"raw": "{{api-url}}/notification",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"notification"
					]
				},
				"description": "- push a notification to the hopper backend for the user"
			},
			"response": []
		},
		{
			"name": "/notification",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "c10c96de-5327-44f7-98e2-5bb0743f4bb7",
						"exec": [
							"postman.setNextRequest(\"/apps\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"id\": \"{{notificationId}}\",\n\t\"notification\": {\n\t\t\"content\": \"Unglaublich! Sogar das put funktioniert wie Schmidt's Qualle\"\n\t}\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{api-url}}/notification",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"notification"
					]
				},
				"description": "- edit details of notification with provided id which was already sent to the backend\n- id: id of notification to be edited"
			},
			"response": []
		},
		{
			"name": "/notification (App)",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d2c20acb-0fc5-4b51-b485-f7765ee3c2c7",
						"exec": [
							"if (pm.collectionVariables.get(\"deleteInstantly\") === true) {",
							"    pm.collectionVariables.set(\"deleteInstantly\", false);",
							"    postman.setNextRequest(\"/notification (Create)\");",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "{{api-url}}/notification?id={{notificationId}}",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"notification"
					],
					"query": [
						{
							"key": "id",
							"value": "{{notificationId}}"
						}
					]
				},
				"description": "- delete notification with the provided id\n- id: id of the notification to be deleted"
			},
			"response": []
		},
		{
			"name": "/apps",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "c0710587-c52f-4649-a637-1ee24d5e364f",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{api-url}}/apps?id={{appId}}",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"apps"
					],
					"query": [
						{
							"key": "id",
							"value": "{{appId}}"
						}
					]
				},
				"description": "- get all apps associated with the current user"
			},
			"response": []
		},
		{
			"name": "/subscriptions",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "b01703a1-af2b-4dc8-9dc9-685209f75dd0",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{api-url}}/subscriptions",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"subscriptions"
					]
				},
				"description": "- get all subscriptions of the user\n- contains the apps"
			},
			"response": []
		},
		{
			"name": "/notifications",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "fbd4dc68-e75c-403a-95c8-26d76506ad3e",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{api-url}}/notifications?limit=10&skip=0&includeDone=true",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"notifications"
					],
					"query": [
						{
							"key": "limit",
							"value": "10"
						},
						{
							"key": "skip",
							"value": "0"
						},
						{
							"key": "includeDone",
							"value": "true"
						}
					]
				},
				"description": "- get notifications of user with\n- limit?\n- offset?\n- app?: id of specific app"
			},
			"response": []
		},
		{
			"name": "/notifications/done",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "481c48b2-6231-44df-afd3-82db6aec706b",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"id\": \"{{notificationId}}\"\n}"
				},
				"url": {
					"raw": "{{api-url}}/notifications/done",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"notifications",
						"done"
					]
				},
				"description": "- mark notification with specific id as done\n- id: unique id of notification"
			},
			"response": []
		},
		{
			"name": "/notifications/undone",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "f3e578b4-68ea-4efb-b173-86983c1dbfac",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"id\": \"{{notificationId}}\"\n}"
				},
				"url": {
					"raw": "{{api-url}}/notifications/undone",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"notifications",
						"undone"
					]
				},
				"description": "- mark notification with specific id as done\n- id: unique id of notification"
			},
			"response": []
		},
		{
			"name": "/notifications",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "2948a2bc-1a3c-4436-9556-f4d5d15449d3",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "{{api-url}}/notifications?id={{notificationId}}",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"notifications"
					],
					"query": [
						{
							"key": "id",
							"value": "{{notificationId}}"
						}
					]
				},
				"description": "- delete notification with id\n- id: id of notification"
			},
			"response": []
		},
		{
			"name": "/subscriptions",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "ecc7f8ff-17d8-4b30-92c0-ede7a40f6e3e",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "{{api-url}}/subscriptions?id={{subscriptionId}}",
					"host": [
						"{{api-url}}"
					],
					"path": [
						"subscriptions"
					],
					"query": [
						{
							"key": "id",
							"value": "{{subscriptionId}}"
						}
					]
				},
				"description": "- unsubscribe the user\n- id: id of subscription"
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "4e3ef70b-6edb-4f9e-9af9-d11e93f66397",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "39fd88cf-c3cf-48a6-b2a5-c917f7861a7b",
				"type": "text/javascript",
				"exec": [
					"pm.test(\"Response time is less than 200ms\", function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(200);",
					"});",
					"pm.test(\"Status code is 200\", function () {",
					"    pm.response.to.have.status(200);",
					"});"
				]
			}
		}
	],
	"variable": [
		{
			"id": "b70481cb-6448-4eba-be4c-56ad1d67641b",
			"key": "api-entry",
			"value": "/v1",
			"type": "string"
		},
		{
			"id": "04eabd45-ae00-41c6-b03a-89cff31aa0d5",
			"key": "appId",
			"value": "5eb6cafd4e05a32868462625",
			"type": "string"
		},
		{
			"id": "f2353387-693b-42d4-a3c9-515410b8647a",
			"key": "subscriptionId",
			"value": "",
			"type": "string"
		},
		{
			"id": "87d443ff-9d7b-4740-a00d-d51b2e33535e",
			"key": "notificationId",
			"value": "",
			"type": "string"
		},
		{
			"id": "ab728d13-1dd8-4601-bfb6-7d4e911271e1",
			"key": "deleteInstantly",
			"value": "true",
			"type": "string"
		}
	],
	"protocolProfileBehavior": {}
}